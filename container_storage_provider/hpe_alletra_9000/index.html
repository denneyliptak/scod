<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hewlett Packard Enterprise" /><link rel="canonical" href="https://scod.hpedev.io/container_storage_provider/hpe_alletra_9000/index.html" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <meta property="og:title" content="HPE Storage Container Orchestrator Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all container integrations surrounding HPE primary storage. Tailored for IT ops, developers and partners. Including HPE Alletra, Nimble Storage and Primera."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://scod.hpedev.io"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://scod.hpedev.io/img/hpe-social-og-image01.jpg"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    
    <title>HPE Alletra 9000 and Primera/3PAR - SCOD.HPEDEV.IO</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/hpedev.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "HPE Alletra 9000 and Primera/3PAR";
        var mkdocs_page_input_path = "container_storage_provider/hpe_alletra_9000/index.md";
        var mkdocs_page_url = "/container_storage_provider/hpe_alletra_9000/index.html";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PC28RTKKTW"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PC28RTKKTW');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SCOD.HPEDEV.IO
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE CSI DRIVER FOR KUBERNETES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/deployment.html">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/using.html">Using</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/metrics.html">Metrics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/monitor.html">Pod Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/operations.html">Auxiliary Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/diagnostics.html">Diagnostics</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CONTAINER STORAGE PROVIDERS</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../hpe_alletra_6000/index.html">HPE Alletra 6000 and Nimble</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="index.html">HPE Alletra 9000 and Primera/3PAR</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#platform_requirements">Platform Requirements</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#network_port_requirements">Network Port Requirements</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#user_role_requirements">User Role Requirements</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#storageclass_parameters">StorageClass Parameters</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#common_provisioning_parameters">Common Provisioning Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ephemeral_inline_volumes">Ephemeral Inline Volumes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#vlun_templates">VLUN Templates</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#importing_volumes">Importing Volumes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#cloning_persistent_volumes">Cloning Persistent Volumes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating_snapshots_of_persistent_volumes">Creating Snapshots of Persistent Volumes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#remote_copy_with_peer_persistence_synchronous_replication_parameters">Remote Copy with Peer Persistence Synchronous Replication Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#add_non-replicated_volume_to_remote_copy_group">Add Non-Replicated Volume to Remote Copy group</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#specifying_iscsi_target_portal_ips">Specifying iSCSI Target Portal IPs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating_a_volumesnapshotclass">Creating a VolumeSnapshotClass</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#import_a_snapshot">Import a Snapshot</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating_a_qos_storageclass">Creating a QoS StorageClass</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating_a_snapshotgroupclass">Creating a SnapshotGroupClass</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating_a_volumegroupclass_with_qos_settings">Creating a VolumeGroupClass with QoS Settings</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#specifying_fibre_channel_ports">Specifying Fibre Channel Ports</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#support">Support</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE EZMERAL RUNTIME ENTERPRISE</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ezmeral/install.html">Install HPE CSI Driver</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">PARTNER ECOSYSTEMS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/commvault/index.html">Commvault</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/kasten/index.html">Kasten by Veeam</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/mirantis/index.html">Mirantis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/redhat_openshift/index.html">Red Hat OpenShift</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/suse_rancher/index.html">SUSE Rancher</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/tkgi/index.html">Tanzu Kubernetes Grid Integrated</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../partners/vmware/index.html">VMware</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEARN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/containers101/index.html">Cloud-Native, Containers & DevOps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/persistent_storage/index.html">Persistent Storage for Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/introduction_to_containers/index.html">For HPE partners:<br />&nbsp;&nbsp; Introduction to Containers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/csi_primitives/index.html">Introduction to CSI Primitives</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/video_gallery/index.html">Video Gallery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/csi_workshop/index.html">Interactive CSI Workshop</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">COMMUNITY</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://developer.hpe.com">HPE Developer Community</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://slack.hpedev.io">Sign up to HPE DEV on Slack</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod/issues/new?title=I have some feedback on SCOD">Got feedback?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EXTERNAL LINKS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod">SCOD on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage">HPE Storage on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://hpe.com/storage/containers">Storage for Containers on hpe.com</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/support/index.html">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/license/index.html">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/notices/index.html">Notices</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGACY DRIVERS AND PLUGINS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../legacy/index.html">Docker, FlexVolume and CSPs</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SCOD.HPEDEV.IO</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>CONTAINER STORAGE PROVIDERS &raquo;</li>
      <li>HPE Alletra 9000 and Primera/3PAR</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<p>The HPE Alletra 9000 and Primera and 3PAR Storage Container Storage Provider (CSP) for Kubernetes is part of the <a href="../../csi_driver/index.html">HPE CSI Driver for Kubernetes</a>. The CSP abstract the data management capabilities of the array for use by Kubernetes. </p>
<div class="toc">
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#platform_requirements">Platform Requirements</a><ul>
<li><a href="#network_port_requirements">Network Port Requirements</a></li>
<li><a href="#user_role_requirements">User Role Requirements</a></li>
</ul>
</li>
<li><a href="#storageclass_parameters">StorageClass Parameters</a><ul>
<li><a href="#common_provisioning_parameters">Common Provisioning Parameters</a></li>
<li><a href="#ephemeral_inline_volumes">Ephemeral Inline Volumes</a></li>
<li><a href="#vlun_templates">VLUN Templates</a></li>
<li><a href="#importing_volumes">Importing Volumes</a></li>
<li><a href="#cloning_persistent_volumes">Cloning Persistent Volumes</a></li>
<li><a href="#creating_snapshots_of_persistent_volumes">Creating Snapshots of Persistent Volumes</a></li>
<li><a href="#remote_copy_with_peer_persistence_synchronous_replication_parameters">Remote Copy with Peer Persistence Synchronous Replication Parameters</a></li>
<li><a href="#add_non-replicated_volume_to_remote_copy_group">Add Non-Replicated Volume to Remote Copy group</a></li>
<li><a href="#specifying_iscsi_target_portal_ips">Specifying iSCSI Target Portal IPs</a></li>
<li><a href="#creating_a_volumesnapshotclass">Creating a VolumeSnapshotClass</a></li>
<li><a href="#import_a_snapshot">Import a Snapshot</a></li>
<li><a href="#creating_a_qos_storageclass">Creating a QoS StorageClass</a></li>
<li><a href="#creating_a_snapshotgroupclass">Creating a SnapshotGroupClass</a></li>
<li><a href="#creating_a_volumegroupclass_with_qos_settings">Creating a VolumeGroupClass with QoS Settings</a></li>
<li><a href="#specifying_fibre_channel_ports">Specifying Fibre Channel Ports</a></li>
<li><a href="#support">Support</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For help getting started with deploying the HPE CSI Driver using HPE Alletra 9000, Primera or 3PAR storage, check out the <a href="https://developer.hpe.com/blog/9o7zJkqlX5cErkrzgopL/tutorial-how-to-get-started-with-the-hpe-csi-driver-and-hpe-primera-and-">tutorial over at HPE Developer</a>.</p>
</div>
<h2 id="platform_requirements">Platform Requirements<a class="headerlink" href="#platform_requirements" title="Permanent link">&para;</a></h2>
<p>Check the corresponding CSI driver version in the <a href="../../csi_driver/index.html#compatibility_and_support">compatibility and support</a> table for the latest updates on supported Kubernetes version, orchestrators and host OS.</p>
<p>Refer to the HPE Single Point of Connectivity Knowledge (SPOCK) for specific platform details (requires an HPE Passport account) of the CSP. The documentation reflected here always corresponds to the latest supported version and may contain references to future features and capabilities. </p>
<ul>
<li><a href="https://h20272.www2.hpe.com/SPOCK/Pages/spock2Html.aspx?htmlFile=hw_alletra.html">HPE Alletra 9000</a></li>
<li><a href="https://h20272.www2.hpe.com/SPOCK/Pages/spock2Html.aspx?htmlFile=hw_primera.html">HPE Primera</a></li>
<li><a href="https://h20272.www2.hpe.com/SPOCK/Pages/spock2Html.aspx?htmlFile=hw_3par.html">HPE 3PAR</a></li>
</ul>
<h3 id="network_port_requirements">Network Port Requirements<a class="headerlink" href="#network_port_requirements" title="Permanent link">&para;</a></h3>
<p>The HPE Alletra 9000, Primera and 3PAR Container Storage Provider requires the following TCP ports to be open inbound to the array from the Kubernetes cluster worker nodes running the HPE CSI Driver for Kubernetes.</p>
<table>
<thead>
<tr>
<th>Port</th>
<th>Protocol</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>443</td>
<td>HTTPS</td>
<td>WSAPI (HPE Alletra 9000/Primera)</td>
</tr>
<tr>
<td>8080</td>
<td>HTTPS</td>
<td>WSAPI (HPE 3PAR)</td>
</tr>
<tr>
<td>22</td>
<td>SSH</td>
<td>Array communication</td>
</tr>
</tbody>
</table>
<h3 id="user_role_requirements">User Role Requirements<a class="headerlink" href="#user_role_requirements" title="Permanent link">&para;</a></h3>
<p>The CSP requires access to a user with either <code>edit</code> or the <code>super</code> role. It's recommended to use the <code>edit</code> role for security best practices.</p>
<h2 id="storageclass_parameters">StorageClass Parameters<a class="headerlink" href="#storageclass_parameters" title="Permanent link">&para;</a></h2>
<p>All parameters enumerated reflects the current version and may contain unannounced features and capabilities. </p>
<h3 id="common_provisioning_parameters">Common Provisioning Parameters<a class="headerlink" href="#common_provisioning_parameters" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>&nbsp;&nbsp;Option&nbsp;&nbsp;</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>accessProtocol <br /> (<strong>Required</strong>)</td>
<td>fc</td>
<td>The access protocol to use when accessing the persistent volume.</td>
</tr>
<tr>
<td></td>
<td>iscsi</td>
<td>The access protocol to use when accessing the persistent volume.</td>
</tr>
<tr>
<td>cpg <sup>1</sup></td>
<td>Text</td>
<td>The name of existing CPG to be used for volume provisioning. If the cpg parameter is not specified, the CSP will automatically set cpg parameter based upon a CPG available to the array.</td>
</tr>
<tr>
<td>snapCpg <sup>1</sup></td>
<td>Text</td>
<td>The name of the snapshot CPG to be used for volume provisioning. Defaults to value of <code>cpg</code> if not specified.</td>
</tr>
<tr>
<td>compression <sup>1</sup></td>
<td>Boolean</td>
<td>Indicates that the volume should be compressed. (3PAR only)</td>
</tr>
<tr>
<td>provisioningType <sup>1</sup> <br /> (<strong>Default: tpvv</strong>)</td>
<td>tpvv</td>
<td>Indicates Thin provisioned volume type.</td>
</tr>
<tr>
<td></td>
<td>full <sup>3</sup></td>
<td>Indicates Full provisioned volume type.</td>
</tr>
<tr>
<td></td>
<td>dedup <sup>3</sup></td>
<td>Indicates Thin Deduplication volume type.</td>
</tr>
<tr>
<td></td>
<td>reduce <sup>4</sup></td>
<td>Indicates Data Reduction volume type.</td>
</tr>
<tr>
<td>hostSeesVLUN</td>
<td>Boolean</td>
<td>Enable "host sees" VLUN template.</td>
</tr>
<tr>
<td>importVol</td>
<td>Text</td>
<td>Name of the volume to import.</td>
</tr>
<tr>
<td>importVolAsClone</td>
<td>Text</td>
<td>Name of the volume to clone and import.</td>
</tr>
<tr>
<td>cloneOf <sup>2</sup></td>
<td>Text</td>
<td>Name of the <code>PersistentVolumeClaim</code> to clone.</td>
</tr>
<tr>
<td>virtualCopyOf <sup>2</sup></td>
<td>Text</td>
<td>Name of the <code>PersistentVolumeClaim</code> to snapshot.</td>
</tr>
<tr>
<td>qosName</td>
<td>Text</td>
<td>Name of the volume set which has QoS rules applied.</td>
</tr>
<tr>
<td>remoteCopyGroup <sup>1</sup></td>
<td>Text</td>
<td>Name of a new or existing Remote Copy group on the array.</td>
</tr>
<tr>
<td>replicationDevices</td>
<td>Text</td>
<td>Indicates name of custom resource of type <code>hpereplicationdeviceinfos</code>.</td>
</tr>
<tr>
<td>allowBatchReplicatedVolumeCreation</td>
<td>Boolean</td>
<td>Enable the batch processing of persistent volumes in 10 second intervals and add them to a single Remote Copy group. <br /> During this process, the Remote Copy group is stopped and started once.</td>
</tr>
<tr>
<td>oneRcgPerPvc</td>
<td>Boolean</td>
<td>Creates a dedicated Remote Copy group per persistent volume.</td>
</tr>
<tr>
<td>iscsiPortalIps</td>
<td>Text</td>
<td>Comma separated list of the array iSCSI port IPs.</td>
</tr>
</tbody>
</table>
<p><small>
 Restrictions applicable when using the <a href="../../csi_driver/using.html#using_volume_mutations">CSI volume mutator</a>:
 <br /><sup>1</sup> = Parameters that are editable after provisioning.
 <br /><sup>2</sup> = Volumes with snapshots/clones can't be modified.
 <br /><sup>3</sup> = HPE 3PAR only parameter
 <br /><sup>4</sup> = HPE Primera/Alletra 9000 only parameter
</small></p>
<p>Please see <a href="../../csi_driver/using.html#base_storageclass_parameters">using the HPE CSI Driver</a> for additional <code>StorageClass</code> examples like CSI snapshots and clones. </p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The HPE CSI Driver allows the <code>PersistentVolumeClaim</code> to override the <code>StorageClass</code> parameters by annotating the <code>PersistentVolumeClaim</code>. Please see <a href="../../csi_driver/using.html#using_pvc_overrides">Using PVC Overrides</a> for more details.</p>
</div>
<h3 id="ephemeral_inline_volumes">Ephemeral Inline Volumes<a class="headerlink" href="#ephemeral_inline_volumes" title="Permanent link">&para;</a></h3>
<p>These parameters are applicable only for Pod inline volumes and to be specified within Pod spec.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>csi.storage.k8s.io/ephemeral</td>
<td>Boolean</td>
<td>Indicates that the request is for ephemeral inline volume. This is a mandatory parameter and must be set to "true".</td>
</tr>
<tr>
<td>inline-volume-secret-name</td>
<td>Text</td>
<td>A reference to the secret object containing sensitive information to pass to the CSI driver to complete the CSI NodePublishVolume call.</td>
</tr>
<tr>
<td>inline-volume-secret-namespace</td>
<td>Text</td>
<td>The namespace of <code>inline-volume-secret-name</code> for ephemeral inline volume.</td>
</tr>
<tr>
<td>size</td>
<td>Text</td>
<td>The size of ephemeral volume specified in MiB or GiB. If unspecified, a default value will be used.</td>
</tr>
<tr>
<td>accessProtocol</td>
<td>Text</td>
<td>Storage access protocol to use, "iscsi" or "fc".</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>All parameters are <strong>required</strong> for inline ephemeral volumes.</p>
</div>
<h3 id="vlun_templates">VLUN Templates<a class="headerlink" href="#vlun_templates" title="Permanent link">&para;</a></h3>
<p>A VLUN template enables the export of a virtual volume as a VLUN to hosts. For more information, see the <a href="https://support.hpe.com/hpesc/public/docDisplay?docId=a00105286en_us&amp;page=createvlun.html">HPE Primera OS Commmand Line Interface - Installation and Reference Guide</a>.</p>
<p>The HPE CSI Driver supports the following types of VLUN templates:</p>
<ul>
<li><strong>Matched set</strong> - (Default) The VLUN is visible to initiators with the host's WWNs only on the specified port(s). </li>
<li><strong>Host sees</strong> - The VLUN is visible to the initiators with any of the host's WWNs.</li>
</ul>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hostSeesVLUN</td>
<td>Boolean</td>
<td>Enable "host sees" VLUN template.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To modify an existing PVC, hostSeesVLUN needs to be specified with the allowMutations parameter along with adding the PVC annotation csi.hpe.com/hostSeesVLUN with the string values of either "true" or "false". The HPE CSI Driver creates the vlun template based upon the <code>hostSeesVLUN</code> parameter during the volume publish operation. For the change to take effect, the <code>Pod</code> will need to be scheduled on another node by either deleting the <code>Pod</code> or draining the node.</p>
</div>
<h3 id="importing_volumes">Importing Volumes<a class="headerlink" href="#importing_volumes" title="Permanent link">&para;</a></h3>
<p>During the import volume process, any legacy (non-container volumes) or existing docker/k8s volume defined in the <strong>ImportVol</strong> parameter, within a <code>StorageClass</code>, will be renamed to match the <code>PersistentVolumeClaim</code> that leverages the <code>StorageClass</code>. The new volumes will be exposed through the HPE CSI Driver and made available to the Kubernetes cluster. <strong>Note:</strong> All previous Access Control Records and Initiator Groups will be removed from the volume when it is imported. The <code>hostSeesVLUN</code> parameter improves the performance in clusters where many pods are being migrated or created.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>accessProtocol</td>
<td>fc or iscsi</td>
<td>The access protocol to use when accessing the persistent volume.</td>
</tr>
<tr>
<td>importVol</td>
<td>Text</td>
<td>The name of the array volume to import.</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>• <strong>No other parameters</strong> are required in the <code>StorageClass</code> when importing a volume outside of those parameters listed in the table above.<br />
• Support for <code>importVol</code> is available from HPE CSI Driver 1.2.0+.</p>
</div>
<h3 id="cloning_persistent_volumes">Cloning Persistent Volumes<a class="headerlink" href="#cloning_persistent_volumes" title="Permanent link">&para;</a></h3>
<p>Cloning supports two modes of cloning. Either use <code>cloneOf</code> and reference a <code>PersistentVolumeClaim</code> in the current namespace to clone or use <code>importVolAsClone</code> and reference an array volume name to clone and import into the Kubernetes cluster. Volumes with clones are immutable once created.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cloneOf</td>
<td>Text</td>
<td>The name of the <code>PersistentVolumeClaim</code> to be cloned. <code>cloneOf</code> and <code>importVolAsClone</code> are mutually exclusive.</td>
</tr>
<tr>
<td>importVolAsClone</td>
<td>Text</td>
<td>The name of the array volume to clone and import. <code>importVolAsClone</code> and <code>cloneOf</code> are mutually exclusive.</td>
</tr>
<tr>
<td>accessProtocol</td>
<td>fc or iscsi</td>
<td>The access protocol to use when accessing the persistent volume.</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>• <strong>No other parameters</strong> are required in the <code>StorageClass</code> while cloning outside of those parameters listed in the table above.<br />
• Cloning using above parameters is independent of snapshot <code>CRD</code> availability on Kubernetes and it can be performed on any supported Kubernetes version.<br />
• Support for <code>importVolAsClone</code> and <code>cloneOf</code> is available from HPE CSI Driver 1.3.0+.</p>
</div>
<h3 id="creating_snapshots_of_persistent_volumes">Creating Snapshots of Persistent Volumes<a class="headerlink" href="#creating_snapshots_of_persistent_volumes" title="Permanent link">&para;</a></h3>
<p>During the snapshotting process, any existing <code>PersistentVolumeClaim</code> defined in the <code>virtualCopyOf</code> parameter within a <code>StorageClass</code>, will be snapped as <code>PersistentVolumeClaim</code> and exposed through the HPE CSI Driver and made available to the Kubernetes cluster. Volumes with snapshots are immutable once created.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>accessProtocol</td>
<td>fc or iscsi</td>
<td>The access protocol to use when accessing the persistent volume.</td>
</tr>
<tr>
<td>virtualCopyOf</td>
<td>Text</td>
<td>The name of existing <code>PersistentVolumeClaim</code> to be snapped</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>• <strong>No other parameters</strong> are required in the <code>StorageClass</code> when snapshotting a volume outside of those parameters listed in the table above.<br />
• Snapshotting using <code>virtualCopyOf</code> is independent of snapshot <code>CRD</code> availability on Kubernetes and it can be performed on any supported Kubernetes version.<br />
• Support for <code>virtualCopyOf</code> is available from HPE CSI Driver 1.3.0+.</p>
</div>
<h3 id="remote_copy_with_peer_persistence_synchronous_replication_parameters">Remote Copy with Peer Persistence Synchronous Replication Parameters<a class="headerlink" href="#remote_copy_with_peer_persistence_synchronous_replication_parameters" title="Permanent link">&para;</a></h3>
<p>To enable replication within the HPE CSI Driver, the following steps must be completed:</p>
<ul>
<li>Create <code>Secrets</code> for both primary and target arrays. Refer to <a href="../../csi_driver/deployment.html#configuring_additional_storage_backends">Configuring Additional Storage Backends</a>.</li>
<li>Create replication custom resource.</li>
<li>Create replication enabled <code>StorageClass</code>.</li>
</ul>
<p>For a tutorial on how to enable replication, check out the blog <a href="https://developer.hpe.com/blog/ppPAlQ807Ah8QGMNl1YE/tutorial-enabling-remote-copy-using-the-hpe-csi-driver-for-kubernetes-on">Enabling Remote Copy using the HPE CSI Driver for Kubernetes on HPE Primera</a></p>
<p>A Custom Resource Definition (CRD) of type <code>hpereplicationdeviceinfos.storage.hpe.com</code>  must be created to define the target array information. The CRD object name will be used to define the <code>StorageClass</code> parameter <strong>replicationDevices</strong>. CRD mandatory parameters: <code>targetCpg</code>, <code>targetName</code>, <code>targetSecret</code> and <code>targetSecretNamespace</code>.</p>
<div class=md-fenced-code-tabs id=tab-tab-group-0><input name=tab-group-0 type=radio id=tab-group-0-0_yaml checked=checked class=code-tab data-lang=yaml aria-controls=tab-group-0-0_yaml-panel role=tab><label for=tab-group-0-0_yaml class=code-tab-label data-lang=yaml id=tab-group-0-0_yaml-label>HPE CSI Driver v2.1.0 and later</label><div class=code-tabpanel role=tabpanel data-lang=yaml id=tab-group-0-0_yaml-panel aria-labelledby=tab-group-0-0_yaml-label><pre><code class=yaml>apiVersion: storage.hpe.com/v2
kind: HPEReplicationDeviceInfo
metadata:
  name: r1
spec:
  target_array_details:
  - targetCpg: &lt;cpg_name&gt;
    targetSnapCpg: &lt;snapcpg_name&gt; #optional.
    targetName: &lt;target_array_name&gt;
    targetSecret: &lt;target_secret_name&gt;
    targetSecretNamespace: hpe-storage
</code></pre></div><input name=tab-group-0 type=radio id=tab-group-0-1_yaml class=code-tab data-lang=yaml aria-controls=tab-group-0-1_yaml-panel role=tab><label for=tab-group-0-1_yaml class=code-tab-label data-lang=yaml id=tab-group-0-1_yaml-label>HPE CSI Driver v2.0.0</label><div class=code-tabpanel role=tabpanel data-lang=yaml id=tab-group-0-1_yaml-panel aria-labelledby=tab-group-0-1_yaml-label><pre><code class=yaml>apiVersion: storage.hpe.com/v1
kind: HPEReplicationDeviceInfo
metadata:
  name: r1
spec:
  target_array_details:
  - targetCpg: &lt;cpg_name&gt;
    targetSnapCpg: &lt;snapcpg_name&gt; #optional.
    targetName: &lt;target_array_name&gt;
    targetSecret: &lt;target_secret_name&gt;
    targetSecretNamespace: hpe-storage
</code></pre></div></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><strong>The HPE CSI Driver only supports Remote Copy Peer Persistence mode.</strong></p>
</div>
<p>These parameters are applicable only for replication. Both parameters are mandatory. If the Remote Copy volume group (RCG) name, as defined within the <code>StorageClass</code>, does not exist on the array, then a new RCG will be created.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>remoteCopyGroup</td>
<td>Text</td>
<td>Name of new or existing Remote Copy group <sup>1</sup> on the array.</td>
</tr>
<tr>
<td>replicationDevices</td>
<td>Text</td>
<td>Indicates name of <code>hpereplicationdeviceinfos</code> Custom Resource Definition (CRD).</td>
</tr>
<tr>
<td>allowBatchReplicatedVolumeCreation</td>
<td>Boolean</td>
<td>Enable the batch processing of persistent volumes in 10 second intervals and add them to a single Remote Copy group. (Optional) <br /> During this process, the Remote Copy group is stopped and started once.</td>
</tr>
<tr>
<td>oneRcgPerPvc</td>
<td>Boolean</td>
<td>Creates a dedicated Remote Copy group per persistent volume. (Optional)</td>
</tr>
</tbody>
</table>
<p><small>
 Remote Copy additional details: 
 <br /><sup>1</sup> = Existing RCG must have CPG and Copy CPG configured.
 <br />Link to <a href="https://techhub.hpe.com/eginfolib/storage/docs/Primera/RemoteCopy/RCconfig/index.html#GUID-F6C62635-5398-48E5-B1A6-3C8D8806C0D8.html">HPE Primera OS: Configuring data replication using Remote Copy</a>
</small></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Remote Copy groups (RCG) created by the HPE CSI driver 2.1 and later have the <strong>Auto synchronize</strong> and <strong>Auto recover</strong> policies applied. <br /> To add or remove these policies from RCGs, modify the existing RCG using the SSMC or CLI with the following command: <br/ > <br /> <strong>Add</strong> <br /> <code>setrcopygroup pol auto_recover,auto_synchronize &lt;group_name&gt;</code> <br/ > <strong>Remove</strong> <br /> <code>setrcopygroup pol no_auto_recover,no_auto_synchronize &lt;group_name&gt;</code></p>
</div>
<h3 id="add_non-replicated_volume_to_remote_copy_group">Add Non-Replicated Volume to Remote Copy group<a class="headerlink" href="#add_non-replicated_volume_to_remote_copy_group" title="Permanent link">&para;</a></h3>
<p>To add a non-replicated volume to an existing Remote Copy group, <code>allowMutations: description</code> at minimum must be defined within the <code>StorageClass</code>. Refer to <a href="#remote_copy_with_peer_persistence_synchronous_replication_parameters">Remote Copy with Peer Persistence Replication</a> for more details.</p>
<p>Edit the non-replicated PVC and annotate the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>remoteCopyGroup</td>
<td>Text</td>
<td>Name of existing Remote Copy group.</td>
</tr>
<tr>
<td>oneRcgPerPvc</td>
<td>Boolean</td>
<td>Creates a dedicated Remote Copy group per persistent volume. (Optional)</td>
</tr>
<tr>
<td>replicationDevices</td>
<td>Text</td>
<td>Indicates name of <code>hpereplicationdeviceinfos</code> Custom Resource Definition (CRD).</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>remoteCopyGroup</code> and <code>oneRcgPerPvc</code> parameters are mutually exclusive and cannot be added together when editing a <code>PVC</code>.</p>
</div>
<h3 id="specifying_iscsi_target_portal_ips">Specifying iSCSI Target Portal IPs<a class="headerlink" href="#specifying_iscsi_target_portal_ips" title="Permanent link">&para;</a></h3>
<p>This parameter allows the ability to specify a subset of the array iSCSI ports for iSCSI sessions. By default, the HPE CSI Driver uses all available iSCSI ports.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>iscsiPortalIps</td>
<td>Text</td>
<td>Comma separated list of target portal IPs.</td>
</tr>
</tbody>
</table>
<h3 id="creating_a_volumesnapshotclass">Creating a VolumeSnapshotClass<a class="headerlink" href="#creating_a_volumesnapshotclass" title="Permanent link">&para;</a></h3>
<p>These parameters are for <code>VolumeSnapshotClass</code> objects when using CSI snapshots. The external snapshotter needs to be deployed on the Kubernetes cluster and is usually performed by the Kubernetes vendor. Check <a href="../../csi_driver/using.html#enabling_csi_snapshots">enabling CSI snapshots</a> for more information. Volumes with snapshots are immutable.</p>
<p>How to use <code>VolumeSnapshotClass</code> and <code>VolumeSnapshot</code> objects is elaborated on in <a href="../../csi_driver/using.html#using_csi_snapshots">using CSI snapshots</a>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>read_only</td>
<td>Boolean</td>
<td>Indicates if the snapshot is writable on the array.</td>
</tr>
</tbody>
</table>
<h3 id="import_a_snapshot">Import a Snapshot<a class="headerlink" href="#import_a_snapshot" title="Permanent link">&para;</a></h3>
<p>During the import snapshot process, any legacy (non-container snapshot) or an existing docker/k8s snapshot defined in the <strong>ImportVol</strong> parameter, within a <code>VolumeSnapshotClass</code>, will be renamed with the prefix "snapshot-". The new snapshot will be exposed through the HPE CSI Driver and made available to the Kubernetes cluster. <strong>Note:</strong> All previous Access Control Records and Initiator Groups will be removed from the snapshot when it is imported.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>importVol</td>
<td>Text</td>
<td>The name of the array snapshot to import.</td>
</tr>
</tbody>
</table>
<h3 id="creating_a_qos_storageclass">Creating a QoS StorageClass<a class="headerlink" href="#creating_a_qos_storageclass" title="Permanent link">&para;</a></h3>
<p>In the array, QoS rules are applied to a volume set. To use an existing volume set with QoS rules on a <code>PersistentVolumeClaim</code>, set the <code>qosName</code> parameter within a <code>StorageClass</code> to the name of the existing array volume set.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>qosName</td>
<td>Text</td>
<td>Name of the HPE Primera or 3PAR volume set which has QoS rules. This parameter is optional. If specified, the <code>PersistentVolumeClaim</code> will be associated with the array volume set, for purposes of applying the QoS rules.</td>
</tr>
</tbody>
</table>
<h3 id="creating_a_snapshotgroupclass">Creating a SnapshotGroupClass<a class="headerlink" href="#creating_a_snapshotgroupclass" title="Permanent link">&para;</a></h3>
<p>These parameters are for <code>SnapshotGroupClass</code> objects when using CSI snapshots. The external snapshotter needs to be deployed on the Kubernetes cluster and is usually performed by the Kubernetes vendor. Check <a href="../../csi_driver/using.html#enabling_csi_snapshots">enabling CSI snapshots</a> for more information. Volumes with snapshots are immutable.</p>
<p>How to use <code>VolumeSnapshotClass</code> and <code>VolumeSnapshot</code> objects is elaborated on in <a href="../../csi_driver/using.html#using_csi_snapshots">using CSI snapshots</a>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>read_only</td>
<td>Boolean</td>
<td>Indicates if the snapshot is writable on the array.</td>
</tr>
</tbody>
</table>
<h3 id="creating_a_volumegroupclass_with_qos_settings">Creating a VolumeGroupClass with QoS Settings<a class="headerlink" href="#creating_a_volumegroupclass_with_qos_settings" title="Permanent link">&para;</a></h3>
<p>In the HPE CSI Driver version 1.4.0+, a volume set with QoS settings can be created dynamically using the QoS parameters for the <code>VolumeGroupClass</code>. The following parameters are available for a <code>VolumeGroup</code> on the array. Learn more about <code>VolumeGroups</code> in the <a href="../../csi_driver/using.html#volume_groups">provisioning concepts documentation</a>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>String</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>priority</td>
<td>Text</td>
<td>The priority level for the target volume set. Example: "low", "normal", "high"</td>
</tr>
<tr>
<td>ioMinGoal</td>
<td>Text</td>
<td>IOPS minimum goal for the target volume set. Example: "300"</td>
</tr>
<tr>
<td>ioMaxLimit</td>
<td>Text</td>
<td>IOPS maximum limit for the target volume set. Example: "10000"</td>
</tr>
<tr>
<td>bwMinGoalKb</td>
<td>Text</td>
<td>Bandwidth minimum goal in kilobytes per second for the target volume set. Example: "300"</td>
</tr>
<tr>
<td>bwMaxLimitKb</td>
<td>Text</td>
<td>Bandwidth maximum limit in kilobytes per second for the target volume set. Example: "30000"</td>
</tr>
<tr>
<td>latencyGoal</td>
<td>Text</td>
<td>Latency goal in milliseconds (ms) or microseconds(us) for the target volume set. Example: "300ms" or "500us"</td>
</tr>
<tr>
<td>domain</td>
<td>Text</td>
<td>The array Virtual Domain, with which the volume group and related objects are associated with. Example: "sample_domain"</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>QoS settings are mandatory when creating a VolumeGroupClass on the array.</p>
</div>
<h3 id="specifying_fibre_channel_ports">Specifying Fibre Channel Ports<a class="headerlink" href="#specifying_fibre_channel_ports" title="Permanent link">&para;</a></h3>
<p>Use this parameter to specify a subset of Fibre Channel (FC) ports on the array to create vluns. By default, the HPE CSI Driver uses all available FC ports.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>fcPortsList</td>
<td>Text</td>
<td>Comma separated list of available FC ports.</td>
</tr>
</tbody>
</table>
<h3 id="support">Support<a class="headerlink" href="#support" title="Permanent link">&para;</a></h3>
<p>Please refer to the HPE Alletra 9000 and Primera and 3PAR Storage CSP <a href="../../legal/support/index.html#hpe_primera_and_hpe_3par_container_storage_provider_support">support statement</a>.</p>
              
            </div>
          </div>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../ezmeral/install.html" class="btn btn-neutral float-right" title="Install HPE CSI Driver">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../hpe_alletra_6000/index.html" class="btn btn-neutral" title="HPE Alletra 6000 and Nimble"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 Hewlett Packard Enterprise Development LP<br />Give <a href="https://github.com/hpe-storage/scod/issues/new?title=container_storage_provider/hpe_alletra_9000/index.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../hpe_alletra_6000/index.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../ezmeral/install.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
