<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Hewlett Packard Enterprise" /><link rel="canonical" href="https://scod.hpedev.io/partners/redhat_openshift/index.html" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <meta property="og:title" content="HPE Storage Container Orchestrator Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all container integrations surrounding HPE primary storage. Tailored for IT ops, developers and partners. Including HPE Alletra, Nimble Storage and Primera."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://scod.hpedev.io"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://scod.hpedev.io/img/hpe-social-og-image01.jpg"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    
    <title>Red Hat OpenShift - SCOD.HPEDEV.IO</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../css/hpedev.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Red Hat OpenShift";
        var mkdocs_page_input_path = "partners/redhat_openshift/index.md";
        var mkdocs_page_url = "/partners/redhat_openshift/index.html";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-PC28RTKKTW"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PC28RTKKTW');
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> SCOD.HPEDEV.IO
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE CSI DRIVER FOR KUBERNETES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/index.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/deployment.html">Deployment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/using.html">Using</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/metrics.html">Metrics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/monitor.html">Pod Monitor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/operations.html">Auxiliary Operations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../csi_driver/diagnostics.html">Diagnostics</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CONTAINER STORAGE PROVIDERS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../container_storage_provider/hpe_alletra_6000/index.html">HPE Alletra 6000 and Nimble</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../container_storage_provider/hpe_alletra_9000/index.html">HPE Alletra 9000 and Primera/3PAR</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">HPE EZMERAL RUNTIME ENTERPRISE</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../ezmeral/install.html">Install HPE CSI Driver</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">PARTNER ECOSYSTEMS</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../commvault/index.html">Commvault</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../kasten/index.html">Kasten by Veeam</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mirantis/index.html">Mirantis</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="index.html">Red Hat OpenShift</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#openshift_4">OpenShift 4</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#certified_combinations">Certified combinations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#security_model">Security model</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#limitations">Limitations</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#deployment">Deployment</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#upgrading">Upgrading</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#openshift_web_console">OpenShift web console</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#openshift_cli">OpenShift CLI</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#additional_information">Additional information</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#uninstall_the_hpe_csi_operator">Uninstall the HPE CSI Operator</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suse_rancher/index.html">SUSE Rancher</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tkgi/index.html">Tanzu Kubernetes Grid Integrated</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vmware/index.html">VMware</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEARN</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/containers101/index.html">Cloud-Native, Containers & DevOps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/persistent_storage/index.html">Persistent Storage for Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/introduction_to_containers/index.html">For HPE partners:<br />&nbsp;&nbsp; Introduction to Containers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/csi_primitives/index.html">Introduction to CSI Primitives</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/video_gallery/index.html">Video Gallery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../learn/csi_workshop/index.html">Interactive CSI Workshop</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">COMMUNITY</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://developer.hpe.com">HPE Developer Community</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://slack.hpedev.io">Sign up to HPE DEV on Slack</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod/issues/new?title=I have some feedback on SCOD">Got feedback?</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">EXTERNAL LINKS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage/scod">SCOD on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://github.com/hpe-storage">HPE Storage on GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://hpe.com/storage/containers">Storage for Containers on hpe.com</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/support/index.html">Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/license/index.html">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../legal/notices/index.html">Notices</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGACY DRIVERS AND PLUGINS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../legacy/index.html">Docker, FlexVolume and CSPs</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SCOD.HPEDEV.IO</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>PARTNER ECOSYSTEMS &raquo;</li>
      <li>Red Hat OpenShift</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><img src="img/redhat-certified.png" align="right" width="160" hspace="20" vspace="20" /></p>
<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>HPE and Red Hat have a long standing partnership to provide jointly supported software, platform and services with the absolute best customer experience in the industry.</p>
<p>Red Hat OpenShift uses open source Kubernetes and various other components to deliver a PaaS experience that benefits both developers and operations. This packaged experience differs slightly on how you would deploy and use the HPE volume drivers and this page serves as the authoritative source for all things HPE primary storage and Red Hat OpenShift.</p>
<div class="toc">
<ul>
<li><a href="#overview">Overview</a><ul>
<li><a href="#openshift_4">OpenShift 4</a><ul>
<li><a href="#certified_combinations">Certified combinations</a></li>
<li><a href="#security_model">Security model</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#deployment">Deployment</a><ul>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#openshift_web_console">OpenShift web console</a></li>
<li><a href="#openshift_cli">OpenShift CLI</a></li>
<li><a href="#additional_information">Additional information</a></li>
<li><a href="#uninstall_the_hpe_csi_operator">Uninstall the HPE CSI Operator</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="openshift_4">OpenShift 4<a class="headerlink" href="#openshift_4" title="Permanent link">&para;</a></h2>
<p>Software deployed on OpenShift 4 follows the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Operator pattern</a>. CSI drivers are no exception.</p>
<h3 id="certified_combinations">Certified combinations<a class="headerlink" href="#certified_combinations" title="Permanent link">&para;</a></h3>
<p>Software delivered through the HPE and Red Hat partnership follows a rigorous certification process and only qualify what's listed in the following table.</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Red Hat OpenShift</th>
<th>HPE CSI Operator</th>
<th>Container Storage Providers</th>
</tr>
</thead>
<tbody>
<tr>
<td>Certified</td>
<td>4.10 EUS<sup>3</sup></td>
<td>2.2.1</td>
<td><a href="../../container_storage_provider/index.html">All</a></td>
</tr>
<tr>
<td>Uncertified<sup>2</sup></td>
<td>4.9 (Upgrade path only)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Certified</td>
<td>4.8 EUS<sup>3</sup></td>
<td>2.1.3<sup>4</sup>, 2.2.1</td>
<td><a href="../../container_storage_provider/index.html">All</a></td>
</tr>
<tr>
<td>Uncertified<sup>2</sup></td>
<td>4.7 (Upgrade path only)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Certified</td>
<td>4.6 EUS<sup>3</sup></td>
<td>1.4.0<sup>4</sup>, 2.0.0<sup>4</sup>, 2.1.3<sup>4</sup></td>
<td><a href="../../container_storage_provider/index.html">All</a></td>
</tr>
</tbody>
</table>
<p><small><sup>1</sup> = End of life support per <a href="https://access.redhat.com/support/policy/updates/openshift">Red Hat OpenShift Life Cycle Policy</a>.</small><br />
<small><sup>2</sup> = HPE will only be certifying the HPE CSI Operator for Kubernetes on <strong>EVEN</strong> versions of Red Hat OpenShift (i.e. 4.4, 4.6, etc). The Operator will not go through the Red Hat certification process for <strong>MIDDLE</strong> releases (i.e. 4.5, 4.7, etc.) and will only be supported as upgrade path to the next <strong>EVEN</strong> release of Red Hat OpenShift.</small><br />
<small><sup>3</sup> = Red Hat OpenShift <a href="https://access.redhat.com/support/policy/updates/openshift-eus">Extended Update Support</a>.</small></br />
<small><sup>4</sup> = This version is currently uninstallable.</small></p>
<p>Check this table periodically for future releases.</p>
<div class="admonition seealso">
<p class="admonition-title">Pointers</p>
<ul>
<li>Other combinations may work but will not be supported.</li>
<li>Both Red Hat Enterprise Linux and Red Hat CoreOS worker nodes are supported.</li>
<li>Instructions on this page only reflect the current version of the CSI Operator and OpenShift.</li>
</ul>
</div>
<h3 id="security_model">Security model<a class="headerlink" href="#security_model" title="Permanent link">&para;</a></h3>
<p>By default, OpenShift prevents containers from running as root. Containers are run using an arbitrarily assigned user ID. Due to these security restrictions, containers that run on Docker and Kubernetes might not run successfully on Red Hat OpenShift without modification. </p>
<p>Users deploying applications that require persistent storage (i.e. through the HPE CSI Driver) will need the appropriate permissions and Security Context Constraints (SCC) to be able to request and manage storage through OpenShift. Modifying container security to work with OpenShift is outside the scope of this document.</p>
<p>For more information on OpenShift security, see <a href="https://docs.openshift.com/container-platform/4.6/authentication/managing-security-context-constraints.html">Managing security context constraints</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run into issues writing to persistent volumes provisioned by the HPE CSI Driver under a restricted SCC, add the <code>fsMode: "0770"</code> parameter to the <code>StorageClass</code> with RWO claims or <code>fsMode: "0777"</code> for RWX claims.</p>
</div>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<p>Since the CSI Operator only provides "Basic Install" capabilities. The following limitations apply:</p>
<ul>
<li>The <code>ConfigMap</code> "hpe-linux-config" that controls host configuration is immutable</li>
</ul>
<h3 id="deployment">Deployment<a class="headerlink" href="#deployment" title="Permanent link">&para;</a></h3>
<p>The HPE CSI Operator for Kubernetes needs to be installed through the interfaces provided by Red Hat. Do not follow the instructions found on OperatorHub.io. </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>There's a tutorial available on YouTube accessible through the <a href="../../learn/video_gallery/index.html#install_the_hpe_csi_operator_for_kubernetes_on_red_hat_openshift">Video Gallery</a> on how to install and use the HPE CSI Operator on Red Hat OpenShift. </p>
</div>
<h4 id="upgrading">Upgrading<a class="headerlink" href="#upgrading" title="Permanent link">&para;</a></h4>
<p>In situations where the operator needs to be upgraded, follow the prerequisite steps in the Helm chart on Artifact Hub.</p>
<ul>
<li><a href="https://artifacthub.io/packages/helm/hpe-storage/hpe-csi-driver#upgrading-the-chart">Upgrading the chart</a></li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Automatic Updates</p>
<p>Do not under any circumstance enable "Automatic Updates" for the HPE CSI Operator for Kubernetes</p>
</div>
<p>Once the steps have been followed for the particular version transition:</p>
<ul>
<li>Uninstall the <code>HPECSIDriver</code> instance</li>
<li>Delete the "hpecsidrivers.storage.hpe.com" <code>CRD</code><br />:
  <code>oc delete crd/hpecsidrivers.storage.hpe.com</code></li>
<li><a href="#uninstall_the_hpe_csi_operator">Uninstall</a> the HPE CSI Operator for Kubernetes</li>
<li>Proceed to installation through the <a href="#openshift_web_console">OpenShift Web Console</a> or <a href="#openshift_cli">OpenShift CLI</a></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Good to know</p>
<p>Deleting the <code>HPECSIDriver</code> instance and uninstalling the CSI Operator does not affect any running workloads, <code>PersistentVolumeClaims</code>, <code>StorageClasses</code> or other API resources created by the CSI Operator. In-flight operations and new requests will be retried once the new <code>HPECSIDriver</code> has been instantiated.</p>
</div>
<h4 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h4>
<p>The HPE CSI Driver needs to run in privileged mode and needs access to host ports, host network and should be able to mount hostPath volumes. Hence, before deploying HPE CSI Operator on OpenShift, please create the following <code>SecurityContextConstraints</code> (SCC) to allow the CSI driver to be running with these privileges.</p>
<p>Download the SCC to where you have access to <code>oc</code> and the OpenShift cluster:</p>
<p> <pre><code class=text>curl -sL https://raw.githubusercontent.com/hpe-storage/co-deployments/master/operators/hpe-csi-operator/deploy/scc.yaml &gt; hpe-csi-scc.yaml
</code></pre></p>
<p>Change <code>my-hpe-csi-operator</code> to the name of the project (e.g. <code>hpe-csi-driver</code> below) where the CSI Operator is being deployed.</p>
<p> <pre><code class=text>oc new-project hpe-csi-driver --display-name=&quot;HPE CSI Driver for Kubernetes&quot;
sed -i'' -e 's/my-hpe-csi-driver-operator/hpe-csi-driver/g' hpe-csi-scc.yaml
</code></pre></p>
<p>Deploy the SCC:</p>
<p> <pre><code class=text>oc create -f hpe-csi-scc.yaml
securitycontextconstraints.security.openshift.io/hpe-csi-scc created
</code></pre></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make note of the project name as it's needed for the Operator deployment in the next steps.</p>
</div>
<h4 id="openshift_web_console">OpenShift web console<a class="headerlink" href="#openshift_web_console" title="Permanent link">&para;</a></h4>
<p>Once the SCC has been applied to the project, login to the OpenShift web console as <code>kube:admin</code> and navigate to <strong>Operators -&gt; OperatorHub</strong>.</p>
<p><img alt="Search for HPE" src="img/webcon-1.png" />
<em>Search for 'HPE CSI' in the search field and select the non-marketplace version.</em></p>
<p><img alt="Click Install" src="img/webcon-2.png" />
<em>Click 'Install'.</em></p>
<p><img alt="Click Install" src="img/webcon-3.png" />
<em>Select the Namespace where the SCC was applied, select 'Manual' Update Approval, click 'Install'.</em></p>
<p><img alt="Click Approve" src="img/webcon-3-1.png" />
<em>Click 'Approve' to finalize installation of the Operator</em></p>
<p><img alt="Operator installed" src="img/webcon-4.png" />
<em>The HPE CSI Operator is now installed, select 'View Operator'.</em></p>
<p><img alt="Create a new instance" src="img/webcon-5.png" />
<em>Click 'Create Instance'.</em></p>
<p><img alt="Configure instance" src="img/webcon-6.png" />
<em>Normally, no customizations are needed, click 'Create'.</em></p>
<p>By navigating to the Developer view, it should now be possible to inspect the CSI driver and Operator topology.</p>
<p><img alt="Operator Topology" src="img/webcon-7.png" /></p>
<p>The CSI driver is now ready for use. Next, an <a href="../../csi_driver/deployment.html#add_an_hpe_storage_backend">HPE storage backend needs to be added</a> along with a <a href="../../csi_driver/using.html#base_storageclass_parameter"><code>StorageClass</code></a>.</p>
<p>See <a href="#caveats">Caveats</a> below for information on creating <code>StorageClasses</code> in Red Hat OpenShift.</p>
<h4 id="openshift_cli">OpenShift CLI<a class="headerlink" href="#openshift_cli" title="Permanent link">&para;</a></h4>
<p>This provides an example Operator deployment using <code>oc</code>. If you want to use the web console, proceed to the <a href="#openshift_web_console">previous section</a>.</p>
<p>It's assumed the SCC has been applied to the project and have <code>kube:admin</code> privileges. As an example, we'll deploy to the <code>hpe-csi-driver</code> project as described in previous steps.</p>
<p>First, an <code>OperatorGroup</code> needs to be created.</p>
<p> <pre><code class=yaml>apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: hpe-csi-driver-for-kubernetes
  namespace: hpe-csi-driver
spec:
  targetNamespaces:
  - hpe-csi-driver
</code></pre></p>
<p>Next, create a <code>Subscription</code> to the Operator.</p>
<p> <pre><code class=yaml>apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: hpe-csi-operator
  namespace: hpe-csi-driver
spec:
  channel: stable
  installPlanApproval: Manual
  name: hpe-csi-operator
  source: certified-operators
  sourceNamespace: openshift-marketplace
</code></pre></p>
<p>Next, approve the installation.</p>
<p> <pre><code class=text>oc -n hpe-csi-driver patch $(oc get installplans -n hpe-csi-driver -o name) -p '{&quot;spec&quot;:{&quot;approved&quot;:true}}' --type merge
</code></pre></p>
<p>The Operator will now be installed on the OpenShift cluster. Before instantiating a CSI driver, watch the roll-out of the Operator.</p>
<p> <pre><code class=text>oc rollout status deploy/hpe-csi-driver-operator -n hpe-csi-driver
Waiting for deployment &quot;hpe-csi-driver-operator&quot; rollout to finish: 0 of 1 updated replicas are available...
deployment &quot;hpe-csi-driver-operator&quot; successfully rolled out
</code></pre></p>
<p>The next step is to create a <code>HPECSIDriver</code> object.</p>
<p> <pre><code class=yaml>---
apiVersion: storage.hpe.com/v1
kind: HPECSIDriver
metadata:
  name: csi-driver
spec:
  disable:
    nimble: false
    primera: false
    alletra6000: false
    alletra9000: false
  imagePullPolicy: IfNotPresent
  logLevel: info
  disableNodeConformance: false
  iscsi:
    chapUser: ''
    chapPassword: ''
  registry: quay.io
  kubeletRootDir: &quot;/var/lib/kubelet/&quot;
  disableNodeGetVolumeStats: false
  controller:
    affinity: {}
    labels: {}
    nodeSelector: {}
    tolerations: []
  csp:
    affinity: {}
    labels: {}
    nodeSelector: {}
    tolerations: []
  node:
    affinity: {}
    labels: {}
    nodeSelector: {}
    tolerations: []
</code></pre></p>
<p>The CSI driver is now ready for use. Next, an <a href="../../csi_driver/deployment.html#add_an_hpe_storage_backend">HPE storage backend needs to be added</a> along with a <a href="../../csi_driver/using.html#base_storageclass_parameter"><code>StorageClass</code></a>.</p>
<h4 id="additional_information">Additional information<a class="headerlink" href="#additional_information" title="Permanent link">&para;</a></h4>
<p>At this point the CSI driver is managed like any other Operator on Kubernetes and the life-cycle management capabilities may be explored further in the <a href="https://docs.openshift.com/container-platform/4.3/operators/olm-what-operators-are.html">official Red Hat OpenShift documentation</a>.</p>
<h4 id="uninstall_the_hpe_csi_operator">Uninstall the HPE CSI Operator<a class="headerlink" href="#uninstall_the_hpe_csi_operator" title="Permanent link">&para;</a></h4>
<p>When uninstalling an operator managed by OLM, a Cluster Admin must decide whether or not to remove the <code>CustomResourceDefinitions</code> (CRD), <code>APIServices</code>, and resources related to these types owned by the operator. By design, when OLM uninstalls an operator it does not remove any of the operator’s owned <code>CRDs</code>, <code>APIServices</code>, or <code>CRs</code> in order to prevent data loss.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not modify or remove these <code>CRDs</code> or <code>APIServices</code> if you are upgrading or reinstalling the HPE CSI driver in order to prevent data loss.</p>
</div>
<p>The following are <code>CRDs</code> installed by the HPE CSI driver.</p>
<p> <pre><code class=text>hpecsidrivers.storage.hpe.com
hpenodeinfos.storage.hpe.com
hpereplicationdeviceinfos.storage.hpe.com
hpesnapshotgroupinfos.storage.hpe.com
hpevolumegroupinfos.storage.hpe.com
hpevolumeinfos.storage.hpe.com
snapshotgroupclasses.storage.hpe.com
snapshotgroupcontents.storage.hpe.com
snapshotgroups.storage.hpe.com
volumegroupclasses.storage.hpe.com
volumegroupcontents.storage.hpe.com
volumegroups.storage.hpe.com
</code></pre></p>
<p>The following are <code>APIServices</code> installed by the HPE CSI driver.</p>
<p> <pre><code class=text>v1.storage.hpe.com
v2.storage.hpe.com
</code></pre></p>
<p>Please refer to the OLM Lifecycle Manager documentation on how to safely <a href="https://olm.operatorframework.io/docs/tasks/uninstall-operator/">Uninstall your operator</a>.</p>
              
            </div>
          </div>

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../suse_rancher/index.html" class="btn btn-neutral float-right" title="SUSE Rancher">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../mirantis/index.html" class="btn btn-neutral" title="Mirantis"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 Hewlett Packard Enterprise Development LP<br />Give <a href="https://github.com/hpe-storage/scod/issues/new?title=partners/redhat_openshift/index.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../mirantis/index.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../suse_rancher/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
